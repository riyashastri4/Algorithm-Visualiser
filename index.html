<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Visualizer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: monospace; }
        body { background: #1a1a1a; color: #e0e0e0; height: 100vh; display: flex; }
        
        #sidebar { width: 280px; background: #2d2d2d; padding: 20px; overflow-y: auto; }
        #canvas { flex: 1; background: #0a0a0a; }
        #editor { position: fixed; bottom: 0; right: 0; width: 400px; height: 300px; background: #1e1e1e; border: none; color: #fff; padding: 10px; font-size: 13px; font-family: monospace; resize: none; }
        #editor-header { background: #333; padding: 8px; color: #63b3ed; font-weight: bold; }
        
        button { width: 100%; padding: 12px; margin: 4px 0; background: #4a5568; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 14px; }
        button:hover { background: #63b3ed; }
        button.active { background: #4299e1; }
        
        .section { margin-bottom: 25px; }
        .section h3 { color: #63b3ed; margin-bottom: 12px; font-size: 15px; border-bottom: 1px solid #444; padding-bottom: 5px; }
        input[type="range"] { width: 100%; margin: 8px 0; }
        label { display: block; margin: 6px 0; font-size: 12px; color: #a0a0a0; }
        #stats { background: #333; padding: 12px; margin-top: 15px; font-size: 13px; border-radius: 3px; }
    </style>
</head>
<body>
    <div id="sidebar">
        <div class="section">
            <h3>Algorithms</h3>
            <button onclick="selectAlgo('bubble')" id="bubble">Bubble Sort</button>
            <button onclick="selectAlgo('selection')" id="selection">Selection Sort</button>
            <button onclick="selectAlgo('insertion')" id="insertion">Insertion Sort</button>
            <button onclick="selectAlgo('merge')" id="merge">Merge Sort</button>
            <button onclick="selectAlgo('quick')" id="quick">Quick Sort</button>
            <button onclick="selectAlgo('linear')" id="linear">Linear Search</button>
            <button onclick="selectAlgo('binary')" id="binary">Binary Search</button>
            <button onclick="selectAlgo('bfs')" id="bfs">BFS Maze</button>
            <button onclick="selectAlgo('bst')" id="bst">BST Insert</button>
        </div>
        
        <div class="section">
            <h3>Controls</h3>
            <button onclick="generateData()">New Data</button>
            <button onclick="togglePlay()">Play/Pause</button>
            <button onclick="doStep()">Step</button>
            <button onclick="resetAlgo()">Reset</button>
        </div>
        
        <div class="section">
            <h3>Settings</h3>
            <label>Speed: <span id="speedVal">200</span>ms</label>
            <input type="range" id="speed" min="50" max="1000" value="200" oninput="updateSpeed(this.value)">
            <label>Size: <span id="sizeVal">60</span></label>
            <input type="range" id="size" min="20" max="100" value="60" oninput="updateSize(this.value)">
        </div>
        
        <div id="stats">Steps: 0 | Ops: 0 | Status: Ready</div>
    </div>
    
    <canvas id="canvas"></canvas>
    
    <div id="editor-header">C Code Base - Edit array values here</div>
    <textarea id="editor">#include <stdio.h>
int main() {
    int arr[] = {64, 34, 25, 12, 22, 11, 90};
    int n = 7;
    
    printf("Array: ");
    for(int i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
    
    // Change values above and click "New Data" to visualize
    // Example: arr[] = {5, 2, 8, 1, 9, 3};
    
    return 0;
}</textarea>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth - 280;
        canvas.height = window.innerHeight;
        
        let currentAlgo = null, isPlaying = false, animationId;
        let stats = { steps: 0, ops: 0 }, stepDelay = 200, dataSize = 60;
        
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth - 280;
            canvas.height = window.innerHeight;
        });

        const ALGORITHMS = {
            bubble: {
                name: "Bubble Sort", data: [], i: 0, j: 0, complete: false,
                init() {
                    this.data = Array(dataSize).fill(0).map(() => Math.random() * canvas.height * 0.75 + 20);
                    this.i = 0; this.j = 0; this.complete = false; resetStats();
                },
                step() {
                    if (this.i >= this.data.length - 1) { this.complete = true; return; }
                    if (this.j >= this.data.length - this.i - 1) { this.i++; this.j = 0; return; }
                    stats.ops++;
                    if (this.data[this.j] > this.data[this.j + 1]) {
                        [this.data[this.j], this.data[this.j + 1]] = [this.data[this.j + 1], this.data[this.j]];
                    }
                    this.j++;
                    stats.steps++;
                },
                visualize() {
                    const barWidth = canvas.width / this.data.length;
                    this.data.forEach((h, idx) => {
                        const x = idx * barWidth;
                        let color = idx === this.j || idx === this.j + 1 ? '#ff6b6b' : '#4fd0e3';
                        if (idx >= this.data.length - this.i) color = '#26de81';
                        ctx.fillStyle = color;
                        ctx.fillRect(x, canvas.height - h, barWidth - 1, h);
                    });
                }
            },
            selection: {
                name: "Selection Sort", data: [], i: 0, minIdx: 0, complete: false,
                init() {
                    this.data = Array(dataSize).fill(0).map(() => Math.random() * canvas.height * 0.75 + 20);
                    this.i = 0; this.minIdx = 0; this.complete = false; resetStats();
                },
                step() {
                    if (this.i >= this.data.length - 1) { this.complete = true; return; }
                    if (this.minIdx === this.i) {
                        [this.data[this.i], this.data[this.minIdx]] = [this.data[this.minIdx], this.data[this.i]];
                        this.i++; this.minIdx = this.i; stats.ops++; return;
                    }
                    if (this.data[this.minIdx] > this.data[this.minIdx + 1]) this.minIdx++;
                    stats.steps++;
                },
                visualize() {
                    const barWidth = canvas.width / this.data.length;
                    this.data.forEach((h, idx) => {
                        const x = idx * barWidth;
                        let color = idx === this.i ? '#26de81' : (idx === this.minIdx ? '#ff6b6b' : '#4fd0e3');
                        ctx.fillStyle = color;
                        ctx.fillRect(x, canvas.height - h, barWidth - 1, h);
                    });
                }
            },
            insertion: {
                name: "Insertion Sort", data: [], i: 1, j: 0, complete: false,
                init() {
                    this.data = Array(dataSize).fill(0).map(() => Math.random() * canvas.height * 0.75 + 20);
                    this.i = 1; this.j = 0; this.complete = false; resetStats();
                },
                step() {
                    if (this.i >= this.data.length) { this.complete = true; return; }
                    if (this.j >= 0 && this.data[this.j] > this.data[this.j + 1]) {
                        [this.data[this.j], this.data[this.j + 1]] = [this.data[this.j + 1], this.data[this.j]];
                        this.j--; stats.ops++;
                    } else {
                        this.i++; this.j = this.i - 1;
                    }
                    stats.steps++;
                },
                visualize() {
                    const barWidth = canvas.width / this.data.length;
                    this.data.forEach((h, idx) => {
                        const x = idx * barWidth;
                        let color = idx < this.i ? '#26de81' : '#4fd0e3';
                        if (idx === this.j || idx === this.j + 1) color = '#ff6b6b';
                        ctx.fillStyle = color;
                        ctx.fillRect(x, canvas.height - h, barWidth - 1, h);
                    });
                }
            },
            linear: {
                name: "Linear Search", data: [], key: 0, i: 0, found: -1, complete: false,
                init() {
                    this.data = Array(dataSize).fill(0).map(() => Math.floor(Math.random() * 400) + 20);
                    this.key = Math.floor(Math.random() * 400) + 20;
                    this.i = 0; this.found = -1; this.complete = false; resetStats();
                },
                step() {
                    if (this.i >= this.data.length) { this.complete = true; return; }
                    stats.ops++;
                    if (this.data[this.i] === this.key) {
                        this.found = this.i; this.complete = true; return;
                    }
                    this.i++;
                    stats.steps++;
                },
                visualize() {
                    const barWidth = canvas.width / this.data.length;
                    ctx.fillStyle = '#fff';
                    ctx.font = '18px monospace';
                    ctx.fillText(`Key: ${this.key}`, 20, 30);
                    
                    this.data.forEach((val, idx) => {
                        const x = idx * barWidth, h = (val / 420) * canvas.height * 0.6;
                        let color = idx === this.i ? '#ff6b6b' : '#4fd0e3';
                        if (idx === this.found) color = '#26de81';
                        ctx.fillStyle = color;
                        ctx.fillRect(x, canvas.height - h, barWidth - 1, h);
                        ctx.fillStyle = '#fff';
                        ctx.font = '12px monospace';
                        ctx.textAlign = 'center';
                        ctx.fillText(val.toString(), x + barWidth/2, canvas.height - h - 5);
                    });
                }
            }
        };

        function resetStats() { stats = { steps: 0, ops: 0 }; }

        function animate() {
            ctx.fillStyle = 'rgba(10,10,20,0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            if (currentAlgo?.visualize) currentAlgo.visualize();
            
            if (isPlaying && currentAlgo && !currentAlgo.complete) {
                setTimeout(() => {
                    currentAlgo.step();
                    updateStats();
                }, stepDelay);
            }
            
            animationId = requestAnimationFrame(animate);
        }

        function selectAlgo(name) {
            document.querySelectorAll('#sidebar button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(name).classList.add('active');
            currentAlgo = { ...ALGORITHMS[name] };
            if (currentAlgo.init) currentAlgo.init();
            updateStats();
        }

        function generateData() {
            if (currentAlgo?.init) currentAlgo.init();
            updateStats();
        }

        function togglePlay() {
            isPlaying = !isPlaying;
            document.querySelector('button[onclick="togglePlay()"]').textContent = isPlaying ? 'Pause' : 'Play/Pause';
        }

        function doStep() {
            if (currentAlgo && !currentAlgo.complete) {
                currentAlgo.step();
                updateStats();
            }
        }

        function resetAlgo() {
            if (currentAlgo?.init) currentAlgo.init();
            isPlaying = false;
            document.querySelector('button[onclick="togglePlay()"]').textContent = 'Play/Pause';
            updateStats();
        }

        function updateSpeed(val) {
            stepDelay = parseInt(val);
            document.getElementById('speedVal').textContent = val;
        }

        function updateSize(val) {
            dataSize = parseInt(val);
            document.getElementById('sizeVal').textContent = val;
        }

        function updateStats() {
            document.getElementById('stats').textContent = 
                `Steps: ${stats.steps} | Ops: ${stats.ops} | Status: ${currentAlgo?.complete ? 'Complete' : 'Running'}`;
        }

        // Initialize
        selectAlgo('bubble');
        animate();
    </script>
</body>
</html>
